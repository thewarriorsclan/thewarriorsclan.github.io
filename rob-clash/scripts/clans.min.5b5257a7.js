"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function getRadioValue(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.checked)return c.value}}function setRadioValue(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.value==b)return void(d.checked=!0)}}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),SignatureManager=function(){function a(){var b=this;_classCallCheck(this,a),$(document).ready(function(){if(window.clanTag)b.sigType="clans",b.itemId=window.clanTag.replace("#","");else{if(!window.playerTag)return;b.sigType="players",b.itemId=window.playerTag.replace("#","")}b.lng=window.lng,b.signatureBlock=document.getElementById("signatureBlock"),b.signatureOptions=document.getElementById("signatureOptions"),b.signatureImage=document.getElementById("signatureImage"),b.preloadSignatureImage=document.getElementById("preloadSignatureImage"),b.preloadSignatureImage.style.display="none",b.signatureBBCode=document.getElementById("signatureBBCode"),b.signatureHTML=document.getElementById("signatureHTML"),b.signatureDirectLink=document.getElementById("signatureDirectLink"),setRadioValue(b.signatureOptions.color,"fr"==window.lng?"blue":"orange"),$("input").on("change",function(){b.reloadImage(),ga("send","event","signature-"+b.sigType,"Change option",b.itemId)}),setRadioValue(b.signatureOptions.size,"medium"),"127.0.0.1"==window.location.hostname||"dev.clashofstats.com"==window.location.hostname?b.basePath="http://127.0.0.1:3002":b.basePath="https://www.clashofstats.com/signatures"})}return _createClass(a,[{key:"showClanSignatureModal",value:function(){this.reloadImage(),$("#signatureModal").openModal(),ga("send","event","signature-"+this.sigType,"Show modal",this.itemId)}},{key:"reloadImage",value:function(){var a=this,b=this.getSignatureLink();b!=this.signatureImage.src&&(this.currentLink=b,this.signatureBlock.className=getRadioValue(this.signatureOptions.size)+" z-depth-1",this.preloadSignatureImage.style.display="inline-block",this.signatureImage.style.display="none",this.signatureImage.onload=function(){b==a.currentLink&&(a.signatureImage.style.display="inline-block",a.preloadSignatureImage.style.display="none")},this.signatureImage.src=b+"&nocache=true",this.refreshCodes(b))}},{key:"refreshCodes",value:function(a){this.signatureBBCode.value="[center][url="+window.location.href+"][img]"+a+"[/img][/url][/center]",this.signatureHTML.value='<a href="'+window.location.href+'"><img src="'+a+'"/></a>',this.signatureDirectLink.value=a}},{key:"getSignatureLink",value:function(){return this.basePath+"/"+this.sigType+"/"+this.itemId+"?lng="+this.lng+"&color="+getRadioValue(this.signatureOptions.color)+"&size="+getRadioValue(this.signatureOptions.size)}}]),a}(),globalSignatureManager=new SignatureManager;